---
<% 
  gpus = num_gpus.blank? ? 0 : num_gpus.to_i
%>
batch_connect:
  template: "basic"
script:
  native:
    - "-p<%= slurm_partition %>"
    - "-A<%= slurm_account %>"
#    - "--reservation<%= slurm_reservation %>"
    <% if slurm_reservation == "" %><% else %>- "--reservation=<%= slurm_reservation %>"<% end %>
    - "-N1"
    - "-c<%= num_cores %>"
    - "--mem=<% if mem == "" %>1024<% else %><%= mem %><% end %>"
    <% if gpus > 0 %>- "--gpus=<%= gpus.to_s %>"<% end %>
